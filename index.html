<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>THBC → KJC Auto Stake</title>

  <!-- CSS ดำทอง -->
  <link rel="stylesheet" href="style.css" />

  <!-- Ethers.js -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

  <!-- config + main script -->
  <script src="config.js"></script>
  <script src="thbc-kjc.js" defer></script>
</head>
<body>
  <div class="wrap">

    <!-- แถบบน -->
    <div class="navbar">
      <div class="brand">Kaojino THBC → KJC Stake</div>
      <button id="btnConnect">Connect Wallet</button>
    </div>

    <!-- การคำนวณ / ใส่จำนวน -->
    <section class="card">
      <h1>Swap THBC → KJC & Auto-Stake</h1>

      <div class="row">
        <span>Rate (fixed):</span>
        <span id="rateText">–</span>
      </div>
      <div class="row">
        <span>APY:</span>
        <span id="apyText">–</span>
      </div>
      <div class="row">
        <span>Lock duration:</span>
        <span id="lockText">–</span>
      </div>

      <label for="thbcAmount">THBC amount</label>
      <input id="thbcAmount" placeholder="0" inputmode="decimal" />

      <div class="result">
        <div>You will receive & stake: <span id="kjcOut">0</span> KJC</div>
        <div>Estimated reward (after lock): <span id="kjcReward">0</span> KJC</div>
        <div>Total after lock: <span id="kjcTotal">0</span> KJC</div>
      </div>

      <button id="btnApprove">Approve THBC</button>
      <button id="btnStake">Swap & Stake</button>

      <div id="txMessage" class="msg"></div>
    </section>

    <!-- สรุปภาพรวม + รายการ stake ทุกก้อน -->
    <section class="card">
      <h2>Your Position</h2>

      <div class="row">
        <span>Address:</span>
        <span id="addrShort">–</span>
      </div>
      <div class="row">
        <span>THBC spent (all):</span>
        <span id="posThbc">0</span>
      </div>
      <div class="row">
        <span>KJC staked (all):</span>
        <span id="posKjc">0</span>
      </div>
      <div class="row">
        <span>Reward (all):</span>
        <span id="posReward">0</span>
      </div>
      <div class="row">
        <span>Latest unlock time:</span>
        <span id="posUnlock">–</span>
      </div>
      <div class="row">
        <span>Status:</span>
        <span id="posStatus">–</span>
      </div>

      <!-- รายการ stake แยกทีละก้อน -->
      <h3 class="subheading">All Stakes</h3>
      <div id="posList" class="pos-list">
        <!-- จะถูกเติมด้วย JS -->
      </div>

      <button id="btnClaim">Claim KJC</button>
      <div id="claimMessage" class="msg"></div>
    </section>

  </div>
</body>
</html>
